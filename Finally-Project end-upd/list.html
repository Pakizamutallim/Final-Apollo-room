<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.min.css'></link>  
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>

    <div class="container">
        <div class="row justify-content-center mt-5">
            <div class="col-8">
                <div class="mb-3">
                    <label for="nameInp" class="form-label">Product name</label>
                    <input type="text" class="form-control" id="nameInp">
                </div>
                <div class="mb-3">
                    <label for="info" class="form-label">Info</label>
                    <input type="text" class="form-control" id="info">
                </div>
                <div class="mb-3">
                    <label for="price" class="form-label">Price</label>
                    <input type="text" class="form-control" id="price">
                </div>
                <div class="mb-3">
                    <label for="img" class="form-label">Product img</label>
                    <input type="text" class="form-control" id="img">
                </div>
                <div class="mb-3">
                    <label for="hoverImg" class="form-label">Hover Img</label>
                    <input type="text" class="form-control" id="hoverImg">
                </div>

                <div class="d-flex">
                    <div class="mb-3 mx-5">
                        <button class="btn btn-primary" id="insert">Insert</button>
                    </div>
                    <div class="mb-3 mx-5">
                        <button class="btn btn-success" id="edit">Edit</button>
                    </div>
                    <div class="mb-3 mx-5">
                        <button class="btn btn-danger" id="delete">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- <div class="col-8">
                        <div class="mb-3">
                            <label class="form-label">Name</label>
                            <input class="form-control" id="nameInp">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Price</label>
                            <input class="form-control" id="priceInp">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Image</label>
                            <input class="form-control" id="imgInp" >
                        </div>
                        <button type="submit" class="btn btn-primary" id="insert">Insert</button>
                        <button type="submit" class="btn btn-warning" id="update">Update</button>
                        <button type="submit" class="btn btn-danger" id="remove">Remove</button>
                    </div> -->
    <!-- <div class="col-8 mt-5">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Name</th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Image</th>
                                </tr>
                            </thead>
                            <tbody id="tbody">
        
                            </tbody>
                        </table>
                    </div>
                    <div class="col-8 mt-5">
                        <div class="mb-3">
                            <label class="form-label">Id</label>
                            <input class="form-control" id="findIdInp" >
                        </div>
                        <button type="submit" class="btn btn-primary" id="findIdBtn">Find</button>
                        <div class="card" id="card" style="width: 18rem;">
                          
                          </div>
                    </div> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js" integrity="sha512-AA1Bzp5Q0K1KanKKmvN/4d3IRKVlv9PYgwFPvm32nPO6QS8yH1HO7LbgB1pgiOxPtfeg5zEn2ba64MUcqJx6CA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>



    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
       

        const firebaseConfig = {
            apiKey: "AIzaSyDvvcPBxhcpvXgCcfNrimAWN0c7n5h2-zc",
            authDomain: "elements-a60e8.firebaseapp.com",
            databaseURL: "https://elements-a60e8-default-rtdb.firebaseio.com",
            projectId: "elements-a60e8",
            storageBucket: "elements-a60e8.appspot.com",
            messagingSenderId: "782506063379",
            appId: "1:782506063379:web:4e5eec3345a5e15461b1e6"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);


        import { getDatabase, set, ref, update, remove, get, child } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";
        const db = getDatabase();

        const name = document.getElementById("nameInp");
        const price = document.getElementById("price");
        const info = document.getElementById("info");
        const img = document.getElementById("img");
        const hoverImg = document.getElementById("hoverImg");
        const tbody = document.getElementById("tbody");

        const insertBtn = document.getElementById("insert");
        const editBtn = document.getElementById("edit");
        const deleteBtn = document.getElementById("delete");


        

        // let id = generate_uuidv4()
        // function generate_uuidv4() {
        //     return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,
        //         function (c) {
        //             var uuid = Math.random() * 16 | 0, v = c == 'x' ? uuid : (uuid & 0x3 | 0x8);
        //             return uuid.toString(16); 
        //         });
        // }

        // function Insert() {
        //     set(ref(db, "shop/" + id), {
        //         Name: name.value,
        //         Price: price.value,
        //         Info: info.value,
        //         Image: img.value,
        //         Hover: hoverImg.value,
        //         Id: id
        //     })
        //         .then(alert("Elave olundu"))
        //         .catch(err => alert(err))
        // }



        function Edit() {
            update(ref(db, "element/" + id), {
                Name: nameInp.value,
                Price: priceInp.value,
                Image: imgInp.value,
            })
                .then(alert("Yenilendi"))
                .catch(err => alert(err))
        }


        function Delete() {
            remove(ref(db, "element/", + id))
                .then(alert("Element silindi"))
                .catch(err => alert(err))
        }




        insertBtn.addEventListener('click', ()=>{
            let id = generate_uuidv4()
        function generate_uuidv4() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,
                function (c) {
                    var uuid = Math.random() * 16 | 0, v = c == 'x' ? uuid : (uuid & 0x3 | 0x8);
                    return uuid.toString(16); 
                });
        }
            set(ref(db, "element/" + id), {
                Name: name.value,
                Price: price.value,
                Info: info.value,
                Image: img.value,
                Hover: hoverImg.value,
                Id: id
                
            })
            .then( alert("ADDED"))
            .catch(err => alert(err))
        });
        
//         .then(res =>{
//             if(res.ok==true) {
//                 name.value = "",
//                 price.value = "",
//                 info.value = "",
//                 img.value = "",
//                 hoverImg.value = "",
//                 id = ""
//                 }
// })


        editBtn.addEventListener('click', Edit);
        deleteBtn.addEventListener('click', Delete); 

    </script>
</body>

</html>